<html>
<head>
    
</head>
<body>
    <ul id="messages"></ul>
    <form id="form" action="">
      <input id="input" autocomplete="off" /><button>Send</button>
    </form>

    <button onclick=newRoom()>방 만들기</button>

    <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"
    integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
    crossorigin="anonymous"></script>
    <script>
    const socket = io('http://localhost:3000/api/chat');
    
    const room = 'testRoom';
    const userId = 'cheolee';
    const secretpw = '123';

    socket.on('room', function (data) {
        console.log('room', data);
    });

    socket.on('getUser', function (data) {
        console.log('getUesr');
        socket.emit('getUser', room, userId);
    });

    socket.on('chat', function(data, msg){
        console.log('onchat', data, msg);
    });

    socket.on('/api/post/newRoom', function(data){
        console.log('/api/post/newRoom', data);
    });

    function newRoom(){
        socket.emit('/api/post/newRoom', room, userId, secretpw);
    }

    socket.on('/api/get/RoomList', function(data){
        console.log('/api/get/RoomList', data);
    });

    //socket.emit('/api/get/RoomList');

    //socket.emit('/api/post/mandateMaster', room, 'targetid');

    //socket.emit('/api/put/setSecretpw', room, secretpw, newsecret);

    //socket.emit('/api/put/addblockuser', room, 'targetid');

    //socket.emit('/api/put/freeblockuser', room, 'targetid');

    //socket.emit('/api/put/addmuteuser', room, 'targetid');

    //socket.emit('/api/put/freemuteuser', room, 'targetid');


    var form = document.getElementById('form');
    var input = document.getElementById('input');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value) {
        socket.emit('chat', room, userId, input.value);
        input.value = '';
        }
    });
</script>
</body>

</html>